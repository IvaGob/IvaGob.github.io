{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{getAuth,onAuthStateChanged}from\"firebase/auth\";import{getFirestore,doc,getDoc,updateDoc}from\"firebase/firestore\";import{initializeApp}from\"firebase/app\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyB1JR1fYBr3xUDCEJSE67FF8D2gRlSdPcY\",authDomain:\"hot-tours-39775.firebaseapp.com\",projectId:\"hot-tours-39775\",storageBucket:\"hot-tours-39775.firebasestorage.app\",messagingSenderId:\"299242912883\",appId:\"1:299242912883:web:e2f4207f55e72b165f7e06\",measurementId:\"G-TKWTBWYCZZ\"};const app=initializeApp(firebaseConfig);const auth=getAuth(app);const db=getFirestore(app);const UserProfile=()=>{const[user,setUser]=useState(null);const[formData,setFormData]=useState({firstName:\"\",lastName:\"\",phone:\"\"});const[loading,setLoading]=useState(true);// Отримання користувача і його даних\nuseEffect(()=>{const unsubscribe=onAuthStateChanged(auth,async firebaseUser=>{if(firebaseUser){setUser(firebaseUser);const userDocRef=doc(db,\"users\",firebaseUser.email);const docSnap=await getDoc(userDocRef);if(docSnap.exists()){const data=docSnap.data();setFormData({firstName:data.name||\"\",lastName:data.surname||\"\",phone:data.phone||\"\"});}}setLoading(false);});return()=>unsubscribe();},[]);const handleChange=e=>{setFormData(prev=>({...prev,[e.target.name]:e.target.value}));};const handleSave=async()=>{if(!user)return;const userDocRef=doc(db,\"users\",user.email);try{await updateDoc(userDocRef,{name:formData.firstName,surname:formData.lastName,phone:formData.phone});alert(\"Дані успішно оновлено!\");}catch(error){console.error(\"Помилка при оновленні даних:\",error);alert(\"Помилка збереження даних.\");}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"});if(!user)return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0411\\u0443\\u0434\\u044C \\u043B\\u0430\\u0441\\u043A\\u0430, \\u0443\\u0432\\u0456\\u0439\\u0434\\u0456\\u0442\\u044C \\u0443 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u0440\\u043E\\u0444\\u0456\\u043B\\u044C \\u043A\\u043E\\u0440\\u0438\\u0441\\u0442\\u0443\\u0432\\u0430\\u0447\\u0430\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0406\\u043C\\u2019\\u044F:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstName\",value:formData.firstName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u041F\\u0440\\u0456\\u0437\\u0432\\u0438\\u0449\\u0435:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",value:formData.lastName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",value:formData.phone,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,children:\"\\u0417\\u0431\\u0435\\u0440\\u0435\\u0433\\u0442\\u0438\"})]});};export default UserProfile;","map":{"version":3,"names":["React","useEffect","useState","getAuth","onAuthStateChanged","getFirestore","doc","getDoc","updateDoc","initializeApp","jsx","_jsx","jsxs","_jsxs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","UserProfile","user","setUser","formData","setFormData","firstName","lastName","phone","loading","setLoading","unsubscribe","firebaseUser","userDocRef","email","docSnap","exists","data","name","surname","handleChange","e","prev","target","value","handleSave","alert","error","console","children","className","type","onChange","onClick"],"sources":["C:/Users/dacko/my-react-app/src/pages/profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  getAuth,\r\n  onAuthStateChanged,\r\n} from \"firebase/auth\";\r\nimport {\r\n  getFirestore,\r\n  doc,\r\n  getDoc,\r\n  updateDoc\r\n} from \"firebase/firestore\";\r\nimport { initializeApp } from \"firebase/app\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyB1JR1fYBr3xUDCEJSE67FF8D2gRlSdPcY\",\r\n  authDomain: \"hot-tours-39775.firebaseapp.com\",\r\n  projectId: \"hot-tours-39775\",\r\n  storageBucket: \"hot-tours-39775.firebasestorage.app\",\r\n  messagingSenderId: \"299242912883\",\r\n  appId: \"1:299242912883:web:e2f4207f55e72b165f7e06\",\r\n  measurementId: \"G-TKWTBWYCZZ\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\n\r\nconst UserProfile = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    phone: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Отримання користувача і його даних\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\r\n      if (firebaseUser) {\r\n        setUser(firebaseUser);\r\n        const userDocRef = doc(db, \"users\", firebaseUser.email);\r\n        const docSnap = await getDoc(userDocRef);\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          setFormData({\r\n            firstName: data.name || \"\",\r\n            lastName: data.surname || \"\",\r\n            phone: data.phone || \"\",\r\n          });\r\n        }\r\n      }\r\n      setLoading(false);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!user) return;\r\n    const userDocRef = doc(db, \"users\", user.email);\r\n    try {\r\n      await updateDoc(userDocRef, {\r\n        name: formData.firstName,\r\n        surname: formData.lastName,\r\n        phone: formData.phone,\r\n      });\r\n      alert(\"Дані успішно оновлено!\");\r\n    } catch (error) {\r\n      console.error(\"Помилка при оновленні даних:\", error);\r\n      alert(\"Помилка збереження даних.\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Завантаження...</div>;\r\n  if (!user) return <div>Будь ласка, увійдіть у систему.</div>;\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <h1>Профіль користувача</h1>\r\n      <label>\r\n        Ім’я:\r\n        <input\r\n          type=\"text\"\r\n          name=\"firstName\"\r\n          value={formData.firstName}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <label>\r\n        Прізвище:\r\n        <input\r\n          type=\"text\"\r\n          name=\"lastName\"\r\n          value={formData.lastName}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <label>\r\n        Телефон:\r\n        <input\r\n          type=\"text\"\r\n          name=\"phone\"\r\n          value={formData.phone}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <button onClick={handleSave}>Зберегти</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}