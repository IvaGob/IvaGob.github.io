{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{getAuth,onAuthStateChanged}from\"firebase/auth\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserProfile=()=>{const[user,setUser]=useState(null);const[formData,setFormData]=useState({firstName:\"\",lastName:\"\",phone:\"\"});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const auth=getAuth();// Отримання користувача і його даних\nuseEffect(()=>{const unsubscribe=onAuthStateChanged(auth,async firebaseUser=>{if(firebaseUser){setUser(firebaseUser);try{// Отримуємо дані користувача через сервер\nconst response=await fetch(`/api/user/${firebaseUser.email}`);if(!response.ok){throw new Error(\"Помилка при отриманні даних користувача.\");}const data=await response.json();setFormData({firstName:data.name||\"\",lastName:data.surname||\"\",phone:data.phone||\"\"});}catch(err){console.error(\"Помилка при отриманні даних користувача:\",err);setError(\"Помилка при отриманні даних користувача.\");}}setLoading(false);});return()=>unsubscribe();},[auth]);const handleChange=e=>{setFormData(prev=>({...prev,[e.target.name]:e.target.value}));};const handleSave=async()=>{if(!user)return;try{// Оновлюємо дані користувача через сервер\nconst response=await fetch(\"/api/user/order\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:user.email,name:formData.firstName,surname:formData.lastName,phone:formData.phone})});if(!response.ok){throw new Error(\"Помилка збереження даних.\");}const result=await response.json();alert(\"Дані успішно оновлено!\");}catch(error){console.error(\"Помилка при оновленні даних:\",error);alert(\"Помилка збереження даних.\");}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"});if(!user)return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0411\\u0443\\u0434\\u044C \\u043B\\u0430\\u0441\\u043A\\u0430, \\u0443\\u0432\\u0456\\u0439\\u0434\\u0456\\u0442\\u044C \\u0443 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u0440\\u043E\\u0444\\u0456\\u043B\\u044C \\u043A\\u043E\\u0440\\u0438\\u0441\\u0442\\u0443\\u0432\\u0430\\u0447\\u0430\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0406\\u043C\\u2019\\u044F:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstName\",value:formData.firstName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u041F\\u0440\\u0456\\u0437\\u0432\\u0438\\u0449\\u0435:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",value:formData.lastName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",value:formData.phone,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,children:\"\\u0417\\u0431\\u0435\\u0440\\u0435\\u0433\\u0442\\u0438\"}),error&&/*#__PURE__*/_jsx(\"div\",{children:error})]});};export default UserProfile;","map":{"version":3,"names":["React","useEffect","useState","getAuth","onAuthStateChanged","jsx","_jsx","jsxs","_jsxs","UserProfile","user","setUser","formData","setFormData","firstName","lastName","phone","loading","setLoading","error","setError","auth","unsubscribe","firebaseUser","response","fetch","email","ok","Error","data","json","name","surname","err","console","handleChange","e","prev","target","value","handleSave","method","headers","body","JSON","stringify","result","alert","children","className","type","onChange","onClick"],"sources":["C:/Users/dacko/my-react-app/src/pages/profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\n\r\nconst UserProfile = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    phone: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const auth = getAuth();\r\n\r\n  // Отримання користувача і його даних\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\r\n      if (firebaseUser) {\r\n        setUser(firebaseUser);\r\n        try {\r\n          // Отримуємо дані користувача через сервер\r\n          const response = await fetch(`/api/user/${firebaseUser.email}`);\r\n          if (!response.ok) {\r\n            throw new Error(\"Помилка при отриманні даних користувача.\");\r\n          }\r\n          const data = await response.json();\r\n          setFormData({\r\n            firstName: data.name || \"\",\r\n            lastName: data.surname || \"\",\r\n            phone: data.phone || \"\",\r\n          });\r\n        } catch (err) {\r\n          console.error(\"Помилка при отриманні даних користувача:\", err);\r\n          setError(\"Помилка при отриманні даних користувача.\");\r\n        }\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [auth]);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!user) return;\r\n    try {\r\n      // Оновлюємо дані користувача через сервер\r\n      const response = await fetch(\"/api/user/order\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          email: user.email,\r\n          name: formData.firstName,\r\n          surname: formData.lastName,\r\n          phone: formData.phone,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Помилка збереження даних.\");\r\n      }\r\n\r\n      const result = await response.json();\r\n      alert(\"Дані успішно оновлено!\");\r\n    } catch (error) {\r\n      console.error(\"Помилка при оновленні даних:\", error);\r\n      alert(\"Помилка збереження даних.\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Завантаження...</div>;\r\n  if (!user) return <div>Будь ласка, увійдіть у систему.</div>;\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <h1>Профіль користувача</h1>\r\n      <label>\r\n        Ім’я:\r\n        <input\r\n          type=\"text\"\r\n          name=\"firstName\"\r\n          value={formData.firstName}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <label>\r\n        Прізвище:\r\n        <input\r\n          type=\"text\"\r\n          name=\"lastName\"\r\n          value={formData.lastName}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <label>\r\n        Телефон:\r\n        <input\r\n          type=\"text\"\r\n          name=\"phone\"\r\n          value={formData.phone}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <button onClick={handleSave}>Зберегти</button>\r\n      {error && <div>{error}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}