{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dacko\\\\my-react-app\\\\src\\\\pages\\\\profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport { initializeApp } from \"firebase/app\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyB1JR1fYBr3xUDCEJSE67FF8D2gRlSdPcY\",\n  authDomain: \"hot-tours-39775.firebaseapp.com\",\n  projectId: \"hot-tours-39775\",\n  storageBucket: \"hot-tours-39775.appspot.com\",\n  messagingSenderId: \"299242912883\",\n  appId: \"1:299242912883:web:e2f4207f55e72b165f7e06\",\n  measurementId: \"G-TKWTBWYCZZ\"\n};\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst UserProfile = () => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [formData, setFormData] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    phone: \"\"\n  });\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async firebaseUser => {\n      if (firebaseUser) {\n        setUser(firebaseUser);\n        try {\n          const idToken = await firebaseUser.getIdToken();\n\n          // Отримати поточного користувача через бекенд\n          const response = await fetch(`http://localhost:5000/api/currentUser`, {\n            headers: {\n              Authorization: `Bearer ${idToken}`\n            }\n          });\n          if (!response.ok) throw new Error(\"Помилка отримання даних користувача\");\n          const data = await response.json();\n\n          // Завантажити профіль користувача через email через захищений маршрут\n          const profileResponse = await fetch(`http://localhost:5000/api/user/${data.email}`, {\n            headers: {\n              Authorization: `Bearer ${idToken}`\n            }\n          });\n          if (!profileResponse.ok) throw new Error(\"Помилка отримання профілю\");\n          const profileData = await profileResponse.json();\n          setFormData({\n            firstName: profileData.name || \"\",\n            lastName: profileData.surname || \"\",\n            phone: profileData.phone || \"\"\n          });\n        } catch (error) {\n          console.error(\"Помилка завантаження даних:\", error);\n          alert(\"Не вдалося завантажити дані користувача\");\n        }\n      }\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n  const handleChange = e => {\n    setFormData(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n  const handleSave = async () => {\n    if (!user) return;\n    try {\n      const idToken = await user.getIdToken();\n      const response = await fetch(`http://localhost:5000/api/user/updateProfile`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${idToken}`\n        },\n        body: JSON.stringify({\n          email: user.email,\n          name: formData.firstName,\n          surname: formData.lastName,\n          phone: formData.phone\n        })\n      });\n      if (!response.ok) throw new Error(\"Помилка збереження\");\n      alert(\"Дані успішно оновлені!\");\n    } catch (error) {\n      console.error(\"Помилка при збереженні даних:\", error);\n      alert(\"Помилка збереження даних.\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 23\n  }, this);\n  if (!user) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u0411\\u0443\\u0434\\u044C \\u043B\\u0430\\u0441\\u043A\\u0430, \\u0443\\u0432\\u0456\\u0439\\u0434\\u0456\\u0442\\u044C \\u0443 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u041F\\u0440\\u043E\\u0444\\u0456\\u043B\\u044C \\u043A\\u043E\\u0440\\u0438\\u0441\\u0442\\u0443\\u0432\\u0430\\u0447\\u0430 (\\u0447\\u0435\\u0440\\u0435\\u0437 \\u0441\\u0435\\u0440\\u0432\\u0435\\u0440)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\u0406\\u043C\\u2019\\u044F:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"firstName\",\n        value: formData.firstName,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\u041F\\u0440\\u0456\\u0437\\u0432\\u0438\\u0449\\u0435:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"lastName\",\n        value: formData.lastName,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"phone\",\n        value: formData.phone,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSave,\n      children: \"\\u0417\\u0431\\u0435\\u0440\\u0435\\u0433\\u0442\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n_s(UserProfile, \"Pg+zeVDZr/MKbWRK25EzxJXEbjY=\");\n_c = UserProfile;\nexport default UserProfile;\nvar _c;\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"names":["React","useEffect","useState","getAuth","onAuthStateChanged","initializeApp","jsxDEV","_jsxDEV","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","UserProfile","_s","user","setUser","formData","setFormData","firstName","lastName","phone","loading","setLoading","unsubscribe","firebaseUser","idToken","getIdToken","response","fetch","headers","Authorization","ok","Error","data","json","profileResponse","email","profileData","name","surname","error","console","alert","handleChange","e","prev","target","value","handleSave","method","body","JSON","stringify","children","fileName","_jsxFileName","lineNumber","columnNumber","className","type","onChange","onClick","_c","$RefreshReg$"],"sources":["C:/Users/dacko/my-react-app/src/pages/profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\nimport { initializeApp } from \"firebase/app\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyB1JR1fYBr3xUDCEJSE67FF8D2gRlSdPcY\",\r\n  authDomain: \"hot-tours-39775.firebaseapp.com\",\r\n  projectId: \"hot-tours-39775\",\r\n  storageBucket: \"hot-tours-39775.appspot.com\",\r\n  messagingSenderId: \"299242912883\",\r\n  appId: \"1:299242912883:web:e2f4207f55e72b165f7e06\",\r\n  measurementId: \"G-TKWTBWYCZZ\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\n\r\nconst UserProfile = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    phone: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\r\n      if (firebaseUser) {\r\n        setUser(firebaseUser);\r\n\r\n        try {\r\n          const idToken = await firebaseUser.getIdToken();\r\n\r\n          // Отримати поточного користувача через бекенд\r\n          const response = await fetch(`http://localhost:5000/api/currentUser`, {\r\n            headers: { Authorization: `Bearer ${idToken}` },\r\n          });\r\n\r\n          if (!response.ok) throw new Error(\"Помилка отримання даних користувача\");\r\n\r\n          const data = await response.json();\r\n\r\n          // Завантажити профіль користувача через email через захищений маршрут\r\n          const profileResponse = await fetch(`http://localhost:5000/api/user/${data.email}`, {\r\n            headers: { Authorization: `Bearer ${idToken}` },\r\n          });\r\n\r\n          if (!profileResponse.ok) throw new Error(\"Помилка отримання профілю\");\r\n\r\n          const profileData = await profileResponse.json();\r\n\r\n          setFormData({\r\n            firstName: profileData.name || \"\",\r\n            lastName: profileData.surname || \"\",\r\n            phone: profileData.phone || \"\",\r\n          });\r\n        } catch (error) {\r\n          console.error(\"Помилка завантаження даних:\", error);\r\n          alert(\"Не вдалося завантажити дані користувача\");\r\n        }\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!user) return;\r\n    try {\r\n      const idToken = await user.getIdToken();\r\n      const response = await fetch(`http://localhost:5000/api/user/updateProfile`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${idToken}`,\r\n        },\r\n        body: JSON.stringify({\r\n          email: user.email,\r\n          name: formData.firstName,\r\n          surname: formData.lastName,\r\n          phone: formData.phone,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) throw new Error(\"Помилка збереження\");\r\n\r\n      alert(\"Дані успішно оновлені!\");\r\n    } catch (error) {\r\n      console.error(\"Помилка при збереженні даних:\", error);\r\n      alert(\"Помилка збереження даних.\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Завантаження...</div>;\r\n  if (!user) return <div>Будь ласка, увійдіть у систему.</div>;\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <h1>Профіль користувача (через сервер)</h1>\r\n      <label>\r\n        Ім’я:\r\n        <input\r\n          type=\"text\"\r\n          name=\"firstName\"\r\n          value={formData.firstName}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <label>\r\n        Прізвище:\r\n        <input\r\n          type=\"text\"\r\n          name=\"lastName\"\r\n          value={formData.lastName}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <label>\r\n        Телефон:\r\n        <input\r\n          type=\"text\"\r\n          name=\"phone\"\r\n          value={formData.phone}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <button onClick={handleSave}>Зберегти</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}