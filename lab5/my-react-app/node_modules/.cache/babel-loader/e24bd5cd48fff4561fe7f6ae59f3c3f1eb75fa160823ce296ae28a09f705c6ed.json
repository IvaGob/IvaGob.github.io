{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dacko\\\\my-react-app\\\\src\\\\pages\\\\profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserProfile = () => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [formData, setFormData] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    phone: \"\"\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const auth = getAuth();\n\n  // Отримання користувача і його даних\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async firebaseUser => {\n      if (firebaseUser) {\n        setUser(firebaseUser);\n        try {\n          // Отримуємо дані користувача через сервер\n          const response = await fetch(`/api/user/${firebaseUser.email}`);\n          if (!response.ok) {\n            throw new Error(\"Помилка при отриманні даних користувача.\");\n          }\n          const data = await response.json();\n          setFormData({\n            firstName: data.name || \"\",\n            lastName: data.surname || \"\",\n            phone: data.phone || \"\"\n          });\n        } catch (err) {\n          console.error(\"Помилка при отриманні даних користувача:\", err);\n          setError(\"Помилка при отриманні даних користувача.\");\n        }\n      }\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, [auth]);\n  const handleChange = e => {\n    setFormData(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n  const handleSave = async () => {\n    if (!user) return;\n    try {\n      // Оновлюємо дані користувача через сервер\n      const response = await fetch(\"/api/user/order\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: user.email,\n          name: formData.firstName,\n          surname: formData.lastName,\n          phone: formData.phone\n        })\n      });\n      if (!response.ok) {\n        throw new Error(\"Помилка збереження даних.\");\n      }\n      const result = await response.json();\n      alert(\"Дані успішно оновлено!\");\n    } catch (error) {\n      console.error(\"Помилка при оновленні даних:\", error);\n      alert(\"Помилка збереження даних.\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 23\n  }, this);\n  if (!user) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u0411\\u0443\\u0434\\u044C \\u043B\\u0430\\u0441\\u043A\\u0430, \\u0443\\u0432\\u0456\\u0439\\u0434\\u0456\\u0442\\u044C \\u0443 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u041F\\u0440\\u043E\\u0444\\u0456\\u043B\\u044C \\u043A\\u043E\\u0440\\u0438\\u0441\\u0442\\u0443\\u0432\\u0430\\u0447\\u0430\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\u0406\\u043C\\u2019\\u044F:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"firstName\",\n        value: formData.firstName,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\u041F\\u0440\\u0456\\u0437\\u0432\\u0438\\u0449\\u0435:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"lastName\",\n        value: formData.lastName,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"phone\",\n        value: formData.phone,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSave,\n      children: \"\\u0417\\u0431\\u0435\\u0440\\u0435\\u0433\\u0442\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n_s(UserProfile, \"tZ9NYrRIS5bIQDdov4lw87Pt2X4=\");\n_c = UserProfile;\nexport default UserProfile;\nvar _c;\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"names":["React","useEffect","useState","getAuth","onAuthStateChanged","jsxDEV","_jsxDEV","UserProfile","_s","user","setUser","formData","setFormData","firstName","lastName","phone","loading","setLoading","error","setError","auth","unsubscribe","firebaseUser","response","fetch","email","ok","Error","data","json","name","surname","err","console","handleChange","e","prev","target","value","handleSave","method","headers","body","JSON","stringify","result","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","className","type","onChange","onClick","_c","$RefreshReg$"],"sources":["C:/Users/dacko/my-react-app/src/pages/profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\n\r\nconst UserProfile = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    phone: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const auth = getAuth();\r\n\r\n  // Отримання користувача і його даних\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\r\n      if (firebaseUser) {\r\n        setUser(firebaseUser);\r\n        try {\r\n          // Отримуємо дані користувача через сервер\r\n          const response = await fetch(`/api/user/${firebaseUser.email}`);\r\n          if (!response.ok) {\r\n            throw new Error(\"Помилка при отриманні даних користувача.\");\r\n          }\r\n          const data = await response.json();\r\n          setFormData({\r\n            firstName: data.name || \"\",\r\n            lastName: data.surname || \"\",\r\n            phone: data.phone || \"\",\r\n          });\r\n        } catch (err) {\r\n          console.error(\"Помилка при отриманні даних користувача:\", err);\r\n          setError(\"Помилка при отриманні даних користувача.\");\r\n        }\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [auth]);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!user) return;\r\n    try {\r\n      // Оновлюємо дані користувача через сервер\r\n      const response = await fetch(\"/api/user/order\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          email: user.email,\r\n          name: formData.firstName,\r\n          surname: formData.lastName,\r\n          phone: formData.phone,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Помилка збереження даних.\");\r\n      }\r\n\r\n      const result = await response.json();\r\n      alert(\"Дані успішно оновлено!\");\r\n    } catch (error) {\r\n      console.error(\"Помилка при оновленні даних:\", error);\r\n      alert(\"Помилка збереження даних.\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Завантаження...</div>;\r\n  if (!user) return <div>Будь ласка, увійдіть у систему.</div>;\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <h1>Профіль користувача</h1>\r\n      <label>\r\n        Ім’я:\r\n        <input\r\n          type=\"text\"\r\n          name=\"firstName\"\r\n          value={formData.firstName}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <label>\r\n        Прізвище:\r\n        <input\r\n          type=\"text\"\r\n          name=\"lastName\"\r\n          value={formData.lastName}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <label>\r\n        Телефон:\r\n        <input\r\n          type=\"text\"\r\n          name=\"phone\"\r\n          value={formData.phone}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <button onClick={handleSave}>Зберегти</button>\r\n      {error && <div>{error}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}