{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dacko\\\\my-react-app\\\\src\\\\pages\\\\profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserProfile = () => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [formData, setFormData] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    phone: \"\"\n  });\n  const [orderedTours, setOrderedTours] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const auth = getAuth();\n\n  // Отримання користувача та його замовлених турів\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async firebaseUser => {\n      if (firebaseUser) {\n        setUser(firebaseUser);\n        try {\n          // Отримуємо дані користувача та його замовлення через сервер\n          const response = await fetch(`/api/user/${firebaseUser.email}`);\n          if (!response.ok) {\n            throw new Error(\"Помилка при отриманні даних користувача.\");\n          }\n          const data = await response.json();\n          setFormData({\n            firstName: data.name || \"\",\n            lastName: data.surname || \"\",\n            phone: data.phone || \"\"\n          });\n          setOrderedTours(data.orderedTours || []);\n        } catch (err) {\n          console.error(\"Помилка при отриманні даних користувача:\", err);\n          setError(\"Помилка при отриманні даних користувача.\");\n        }\n      }\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, [auth]);\n  const handleChange = e => {\n    setFormData(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n  const handleSave = async () => {\n    if (!user) return;\n    try {\n      // Оновлюємо дані користувача через сервер\n      const response = await fetch(\"/api/user/order\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: user.email,\n          name: formData.firstName,\n          surname: formData.lastName,\n          phone: formData.phone\n        })\n      });\n      if (!response.ok) {\n        throw new Error(\"Помилка збереження даних.\");\n      }\n      const result = await response.json();\n      alert(\"Дані успішно оновлено!\");\n    } catch (error) {\n      console.error(\"Помилка при оновленні даних:\", error);\n      alert(\"Помилка збереження даних.\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 23\n  }, this);\n  if (!user) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u0411\\u0443\\u0434\\u044C \\u043B\\u0430\\u0441\\u043A\\u0430, \\u0443\\u0432\\u0456\\u0439\\u0434\\u0456\\u0442\\u044C \\u0443 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u041F\\u0440\\u043E\\u0444\\u0456\\u043B\\u044C \\u043A\\u043E\\u0440\\u0438\\u0441\\u0442\\u0443\\u0432\\u0430\\u0447\\u0430\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\u0406\\u043C\\u2019\\u044F:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"firstName\",\n        value: formData.firstName,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\u041F\\u0440\\u0456\\u0437\\u0432\\u0438\\u0449\\u0435:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"lastName\",\n        value: formData.lastName,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"phone\",\n        value: formData.phone,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSave,\n      children: \"\\u0417\\u0431\\u0435\\u0440\\u0435\\u0433\\u0442\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u041C\\u043E\\u0457 \\u0437\\u0430\\u043C\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u044F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), orderedTours.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: orderedTours.map((tour, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: tour\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u043C\\u0430\\u0454 \\u0437\\u0430\\u043C\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0445 \\u0442\\u0443\\u0440\\u0456\\u0432.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(UserProfile, \"Ngequ8Qm+coVo+DEVDhpACYSeJU=\");\n_c = UserProfile;\nexport default UserProfile;\nvar _c;\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"names":["React","useEffect","useState","getAuth","onAuthStateChanged","jsxDEV","_jsxDEV","UserProfile","_s","user","setUser","formData","setFormData","firstName","lastName","phone","orderedTours","setOrderedTours","loading","setLoading","error","setError","auth","unsubscribe","firebaseUser","response","fetch","email","ok","Error","data","json","name","surname","err","console","handleChange","e","prev","target","value","handleSave","method","headers","body","JSON","stringify","result","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","className","type","onChange","onClick","length","map","tour","index","_c","$RefreshReg$"],"sources":["C:/Users/dacko/my-react-app/src/pages/profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\n\r\nconst UserProfile = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    phone: \"\",\r\n  });\r\n  const [orderedTours, setOrderedTours] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const auth = getAuth();\r\n\r\n  // Отримання користувача та його замовлених турів\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\r\n      if (firebaseUser) {\r\n        setUser(firebaseUser);\r\n        try {\r\n          // Отримуємо дані користувача та його замовлення через сервер\r\n          const response = await fetch(`/api/user/${firebaseUser.email}`);\r\n          if (!response.ok) {\r\n            throw new Error(\"Помилка при отриманні даних користувача.\");\r\n          }\r\n          const data = await response.json();\r\n          setFormData({\r\n            firstName: data.name || \"\",\r\n            lastName: data.surname || \"\",\r\n            phone: data.phone || \"\",\r\n          });\r\n          setOrderedTours(data.orderedTours || []);\r\n        } catch (err) {\r\n          console.error(\"Помилка при отриманні даних користувача:\", err);\r\n          setError(\"Помилка при отриманні даних користувача.\");\r\n        }\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [auth]);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!user) return;\r\n    try {\r\n      // Оновлюємо дані користувача через сервер\r\n      const response = await fetch(\"/api/user/order\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          email: user.email,\r\n          name: formData.firstName,\r\n          surname: formData.lastName,\r\n          phone: formData.phone,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Помилка збереження даних.\");\r\n      }\r\n\r\n      const result = await response.json();\r\n      alert(\"Дані успішно оновлено!\");\r\n    } catch (error) {\r\n      console.error(\"Помилка при оновленні даних:\", error);\r\n      alert(\"Помилка збереження даних.\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Завантаження...</div>;\r\n  if (!user) return <div>Будь ласка, увійдіть у систему.</div>;\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <h1>Профіль користувача</h1>\r\n      <label>\r\n        Ім’я:\r\n        <input\r\n          type=\"text\"\r\n          name=\"firstName\"\r\n          value={formData.firstName}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <label>\r\n        Прізвище:\r\n        <input\r\n          type=\"text\"\r\n          name=\"lastName\"\r\n          value={formData.lastName}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <label>\r\n        Телефон:\r\n        <input\r\n          type=\"text\"\r\n          name=\"phone\"\r\n          value={formData.phone}\r\n          onChange={handleChange}\r\n        />\r\n      </label>\r\n      <button onClick={handleSave}>Зберегти</button>\r\n\r\n      <h2>Мої замовлення</h2>\r\n      {orderedTours.length > 0 ? (\r\n        <ul>\r\n          {orderedTours.map((tour, index) => (\r\n            <li key={index}>{tour}</li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p>У вас немає замовлених турів.</p>\r\n      )}\r\n\r\n      {error && <div>{error}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}